<!DOCTYPE html>
<html>
<body>
    <video id="qr-video"></video>
    <script type="module">
        import QrScanner from "./qr-scanner.min.js";
        QrScanner.WORKER_PATH = './qr-scanner-worker.min.js';

        const video = document.getElementById('qr-video');
        const qrScanner = new QrScanner(video, result => {
            console.log('decoded qr code:', result);
            window.parent.postMessage({ type: "qr_scan", qr_data: result.data }, "*"); 
            qrScanner.stop(); // Stop the camera
        });
        qrScanner.start();
    </script>
</body>
</html>